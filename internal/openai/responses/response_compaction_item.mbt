///|
/// A compaction item generated by the responses compact API.
struct ResponseCompactionItem {
  /// The unique ID of the compaction item.
  id : String
  /// Encrypted content payload.
  encrypted_content : String
  /// The ID of the entity that created this item.
  created_by : String?
}

///|
pub impl ToJson for ResponseCompactionItem with to_json(
  self : ResponseCompactionItem,
) -> Json {
  let obj : Map[String, Json] = {
    "type": "compaction",
    "id": self.id,
    "encrypted_content": self.encrypted_content,
  }
  if self.created_by is Some(created_by) {
    obj["created_by"] = created_by.to_json()
  }
  Json::object(obj)
}

///|
pub impl @json.FromJson for ResponseCompactionItem with from_json(
  json : Json,
  path : @json.JsonPath,
) -> ResponseCompactionItem raise @json.JsonDecodeError {
  let object = @jsonx.as_object(json, path~)
  let id : String = object.required("id", path~)
  let encrypted_content : String = object.required("encrypted_content", path~)
  let _ : String = object.required("type", path~)
  let created_by : String? = object.optional("created_by", path~)
  ResponseCompactionItem::{ id, encrypted_content, created_by }
}
